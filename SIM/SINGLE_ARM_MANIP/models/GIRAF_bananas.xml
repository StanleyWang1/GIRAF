<mujoco model="GIRAF_bananas">
  <compiler angle="radian" autolimits="true"/>
  
  <option gravity="0 0 -9.81" timestep="0.001" iterations="200" solver="Newton" tolerance="1e-10" noslip_iterations="10"/>
  
  <default>
    <geom density="10"/>
    
    <default class="gripper">
      <geom friction="1.5 0.5 0.1" solref="0.01 1" solimp="0.95 0.98 0.0001" condim="4" margin="0.001"/>
    </default>
  </default>
  
  <visual>
    <headlight diffuse="0.6 0.6 0.6" ambient="0.3 0.3 0.3" specular="0 0 0"/>
    <rgba haze="0.15 0.25 0.35 1"/>
    <global azimuth="120" elevation="-20" offwidth="1280" offheight="720"/>
  </visual>
  
  <asset>
    <texture type="skybox" builtin="gradient" rgb1="0.3 0.5 0.7" rgb2="0 0 0" width="512" height="512"/>
    <texture name="groundplane" type="2d" builtin="checker" rgb1="0.2 0.3 0.4" rgb2="0.1 0.2 0.3" width="512" height="512" mark="edge" markrgb="0.8 0.8 0.8"/>
    <material name="groundplane" texture="groundplane" texrepeat="5 5" texuniform="true" reflectance="0.2"/>
    
    <!-- Banana mesh and texture -->
    <mesh name="011_banana_mesh" file="ycb/011_banana/google_16k/textured.obj"/>
    <texture name="011_banana_tex" type="2d" file="ycb/011_banana/google_16k/texture_map.png"/>
    <material name="011_banana_mat" texture="011_banana_tex" specular="0.3" shininess="0.5"/> 
  </asset>
  
  <worldbody>
    <light pos="0 0 3" dir="0 0 -1" directional="false" diffuse="0.8 0.8 0.8" specular="0.2 0.2 0.2"/>
    <light pos="2 2 3" dir="-1 -1 -1" directional="false" diffuse="0.4 0.4 0.4" specular="0.1 0.1 0.1"/>
    <light pos="-2 2 3" dir="1 -1 -1" directional="false" diffuse="0.4 0.4 0.4" specular="0.1 0.1 0.1"/>
    
    <geom name="floor" pos="0 0 0" size="5 5 0.1" type="plane" material="groundplane" 
          friction="1.5 0.5 0.1" solref="0.01 1" solimp="0.95 0.98 0.0001" condim="4" margin="0.001"/>
    
    <body name="base" pos="0 0 0">
      <geom name="cylinder1" type="cylinder" fromto="0 0 0 0 0 0.1" size="0.075" rgba="1.0 0.196 0.196 1"/>

      <body name="spool_bracket" pos="0 0 0.1">
        <joint name="R1" type="hinge" axis="0 0 1" range="-3.14159 3.14159" damping="0.5" armature="0.005" frictionloss="0.3"/>
        <geom name="box1" type="box" size="0.05 0.1 0.075" pos="0 0 0.075" rgba="0.5 0.5 0.5 1"/>

        <body name="spool" pos="0 0 0.11">
          <joint name="R2" type="hinge" axis="0 -1 0" range="-3.14159 3.14159" damping="0.5" armature="0.005" frictionloss="0.3"/>
          <geom name="cylinder2" type="cylinder" fromto="0 -0.075 0 0 0.075 0" size="0.075" rgba="0.1 0.1 0.1 1"/>
          <site name="boom_base" pos="0 0 -0.055" size="0.01" rgba="0.1 0.1 0.1 1"/>

          <body name="boom" pos="0 0 -0.055">
            <joint name="P3" type="slide" axis="1 0 0" limited="true" range="0.2 3.0" damping="20.0" armature="0.01" frictionloss="1"/>
            <geom name="sphere1" type="sphere" size="0.05" pos="0 0 0" rgba="0.1 0.1 0.1 1"/>
            <site name="boom_end" pos="0 0 0" size="0.01" rgba="0.1 0.1 0.1 1"/>

            <body name="wrist" pos="0 0 0">
              <joint name="R4" type="hinge" axis="0.866025 0 0.5" range="-3.14159 3.14159" damping="0.5" armature="0.005" frictionloss="0.3"/>
              <joint name="R5" type="hinge" axis="0 -1 0" range="-3.14159 3.14159" damping="0.5" armature="0.005" frictionloss="0.3"/>
              <joint name="R6" type="hinge" axis="1 0 0" range="-3.14159 3.14159" damping="0.5" armature="0.005" frictionloss="0.3"/>
              <geom name="wrist_link" type="cylinder" fromto="0 0 0 0.1 0 0" size="0.02" rgba="0.2 0.2 0.2 1"/>
              <site name="wrist_base" pos="0.1 0 0" size="0.01" rgba="0.1 0.1 0.1 1"/>
              
              <!-- Wrist-mounted camera: points in +x (forward), OV5648 5MP sensor, HFOV=95Â° -->
              <camera name="wrist_cam" pos="0.05 0 0.0475" xyaxes="0 -1 0 0 0 1" fovy="63" mode="fixed"/>

              <body name="left_gripper" pos="0.133 0 0">
                <joint name="left_grip_joint" type="slide" axis="0 1 0" limited="true" range="0 0.05" damping="1" armature="0.001" frictionloss="0.1"/>
                <geom name="left_jaw" class="gripper" type="box" size="0.04 0.005 0.02" pos="0 0.0125 0" rgba="1.0 0.196 0.196 1"/>
                <site name="left_jaw_base" pos="-0.02 0.01 0" size="0.01" rgba="0.1 0.1 0.1 1"/>
              </body> 
              
              <body name="right_gripper" pos="0.133 0 0">
                <joint name="right_grip_joint" type="slide" axis="0 -1 0" limited="true" range="0 0.05" damping="1" armature="0.001" frictionloss="0.1"/>
                <geom name="right_jaw" class="gripper" type="box" size="0.04 0.005 0.02" pos="0 -0.0125 0" rgba="1.0 0.196 0.196 1"/>
                <site name="right_jaw_base" pos="-0.02 -0.01 0" size="0.01" rgba="0.1 0.1 0.1 1"/>
              </body> 
            </body>
          </body>
        </body>
      </body>
    </body>
    
    <!-- 10 Bananas -->
    <body name="banana_1" pos="0.820 -0.237 0.128" euler="0 0 1.40">
      <freejoint/>
      <geom name="banana_1_geom" type="mesh" mesh="011_banana_mesh" material="011_banana_mat"
            density="60" friction="1.5 0.5 0.1" solref="0.01 1" solimp="0.95 0.98 0.0001" condim="4" margin="0.001"/>
    </body>
    
    <body name="banana_2" pos="0.710 -0.215 0.128" euler="0 0 2.10">
      <freejoint/>
      <geom name="banana_2_geom" type="mesh" mesh="011_banana_mesh" material="011_banana_mat"
            density="60" friction="1.5 0.5 0.1" solref="0.01 1" solimp="0.95 0.98 0.0001" condim="4" margin="0.001"/>
    </body>
    
    <body name="banana_3" pos="0.860 -0.200 0.128" euler="0 0 0.85">
      <freejoint/>
      <geom name="banana_3_geom" type="mesh" mesh="011_banana_mesh" material="011_banana_mat"
            density="60" friction="1.5 0.5 0.1" solref="0.01 1" solimp="0.95 0.98 0.0001" condim="4" margin="0.001"/>
    </body>
    
    <body name="banana_4" pos="0.530 -0.165 0.128" euler="0 0 3.20">
      <freejoint/>
      <geom name="banana_4_geom" type="mesh" mesh="011_banana_mesh" material="011_banana_mat"
            density="60" friction="1.5 0.5 0.1" solref="0.01 1" solimp="0.95 0.98 0.0001" condim="4" margin="0.001"/>
    </body>
    
    <body name="banana_5" pos="0.620 0.060 0.128" euler="0 0 0.25">
      <freejoint/>
      <geom name="banana_5_geom" type="mesh" mesh="011_banana_mesh" material="011_banana_mat"
            density="60" friction="1.5 0.5 0.1" solref="0.01 1" solimp="0.95 0.98 0.0001" condim="4" margin="0.001"/>
    </body>
    
    <body name="banana_6" pos="0.870 0.095 0.128" euler="0 0 0.60">
      <freejoint/>
      <geom name="banana_6_geom" type="mesh" mesh="011_banana_mesh" material="011_banana_mat"
            density="60" friction="1.5 0.5 0.1" solref="0.01 1" solimp="0.95 0.98 0.0001" condim="4" margin="0.001"/>
    </body>
    
    <body name="banana_7" pos="0.910 0.070 0.128" euler="0 0 1.80">
      <freejoint/>
      <geom name="banana_7_geom" type="mesh" mesh="011_banana_mesh" material="011_banana_mat"
            density="60" friction="1.5 0.5 0.1" solref="0.01 1" solimp="0.95 0.98 0.0001" condim="4" margin="0.001"/>
    </body>
    
    <body name="banana_8" pos="0.770 0.220 0.128" euler="0 0 3.55">
      <freejoint/>
      <geom name="banana_8_geom" type="mesh" mesh="011_banana_mesh" material="011_banana_mat"
            density="60" friction="1.5 0.5 0.1" solref="0.01 1" solimp="0.95 0.98 0.0001" condim="4" margin="0.001"/>
    </body>
    
    <body name="banana_9" pos="0.950 -0.100 0.128" euler="0 0 0.70">
      <freejoint/>
      <geom name="banana_9_geom" type="mesh" mesh="011_banana_mesh" material="011_banana_mat"
            density="60" friction="1.5 0.5 0.1" solref="0.01 1" solimp="0.95 0.98 0.0001" condim="4" margin="0.001"/>
    </body>
    
    <body name="banana_10" pos="0.650 -0.050 0.128" euler="0 0 2.50">
      <freejoint/>
      <geom name="banana_10_geom" type="mesh" mesh="011_banana_mesh" material="011_banana_mat"
            density="60" friction="1.5 0.5 0.1" solref="0.01 1" solimp="0.95 0.98 0.0001" condim="4" margin="0.001"/>
    </body>
    
    <!-- Collection Bin -->
    <body name="bin" pos="1.0 0.5 0">
      <geom name="bin_bottom" type="box" size="0.15 0.15 0.005" pos="0 0 0.005" rgba="0.3 0.3 0.35 1" 
            friction="1.5 0.5 0.1" solref="0.01 1" solimp="0.95 0.98 0.0001" condim="4" margin="0.001"/>
      <geom name="bin_wall_front" type="box" size="0.15 0.005 0.08" pos="0 -0.145 0.08" rgba="0.3 0.3 0.35 0.7"
            friction="1.5 0.5 0.1" solref="0.01 1" solimp="0.95 0.98 0.0001" condim="4" margin="0.001"/>
      <geom name="bin_wall_back" type="box" size="0.15 0.005 0.08" pos="0 0.145 0.08" rgba="0.3 0.3 0.35 0.7"
            friction="1.5 0.5 0.1" solref="0.01 1" solimp="0.95 0.98 0.0001" condim="4" margin="0.001"/>
      <geom name="bin_wall_left" type="box" size="0.005 0.14 0.08" pos="-0.145 0 0.08" rgba="0.3 0.3 0.35 0.7"
            friction="1.5 0.5 0.1" solref="0.01 1" solimp="0.95 0.98 0.0001" condim="4" margin="0.001"/>
      <geom name="bin_wall_right" type="box" size="0.005 0.14 0.08" pos="0.145 0 0.08" rgba="0.3 0.3 0.35 0.7"
            friction="1.5 0.5 0.1" solref="0.01 1" solimp="0.95 0.98 0.0001" condim="4" margin="0.001"/>
    </body>
    
  </worldbody>
  
  <tendon>
    <spatial name="boom" width="0.03" rgba="0.2 0.2 0.2 1">
      <site site="boom_base"/>
      <site site="boom_end"/>
    </spatial>
    <spatial name="wrist" width="0.01" rgba="0.2 0.2 0.2 1">
      <site site="left_jaw_base"/>
      <site site="wrist_base"/>
      <site site="right_jaw_base"/>
    </spatial>
  </tendon>
  
  <actuator>
    <position name="actuator_R1" joint="R1" kp="100" ctrlrange="-3.14159 3.14159"/>
    <position name="actuator_R2" joint="R2" kp="100" ctrlrange="-3.14159 3.14159"/>
    <position name="actuator_P3" joint="P3" kp="500" ctrlrange="0.2 3.0"/>
    <position name="actuator_R4" joint="R4" kp="100" ctrlrange="-3.14159 3.14159"/>
    <position name="actuator_R5" joint="R5" kp="100" ctrlrange="-3.14159 3.14159"/>
    <position name="actuator_R6" joint="R6" kp="100" ctrlrange="-3.14159 3.14159"/>
    <position name="actuator_left_grip" joint="left_grip_joint" kp="200" ctrlrange="0 0.04"/>
    <position name="actuator_right_grip" joint="right_grip_joint" kp="200" ctrlrange="0 0.04"/>
  </actuator>
  
  <contact>
    <exclude body1="left_gripper" body2="world"/>
    <exclude body1="right_gripper" body2="world"/>
  </contact>
  
</mujoco>
